CREATE TABLE GENRE (
  GENRE_ID NUMBER(10) PRIMARY KEY,
  NAME VARCHAR2(100) NOT NULL
);

CREATE TABLE PUBLISHER (
  PUBLISHER_ID NUMBER(10) PRIMARY KEY,
  NAME VARCHAR2(100) NOT NULL
);
CREATE TABLE BOOK (
  BOOK_ID NUMBER(10) PRIMARY KEY,
  TITLE VARCHAR2(200) NOT NULL,
  PUBLISHING_YEAR NUMBER(4),
  GENRE_ID NUMBER(10),
  PUBLISHER_ID NUMBER(10),
  PRICE NUMBER(10,2),
  CONSTRAINT BOOK_GENRE_FK FOREIGN KEY (GENRE_ID) REFERENCES GENRE(GENRE_ID),
  CONSTRAINT BOOK_PUBLISHER_FK FOREIGN KEY (PUBLISHER_ID) REFERENCES PUBLISHER(PUBLISHER_ID)
);
CREATE TABLE AUTHOR (
  AUTHOR_ID NUMBER(10) PRIMARY KEY,
  NAME VARCHAR2(200) NOT NULL
);
CREATE TABLE BOOK_AUTHOR (
  BOOK_ID NUMBER(10) NOT NULL,
  AUTHOR_ID NUMBER(10) NOT NULL,
  CONSTRAINT BOOK_AUTHOR_PK PRIMARY KEY (BOOK_ID, AUTHOR_ID),
  CONSTRAINT BOOK_AUTHOR_BOOK_FK FOREIGN KEY (BOOK_ID) REFERENCES BOOK(BOOK_ID),
  CONSTRAINT BOOK_AUTHOR_AUTHOR_FK FOREIGN KEY (AUTHOR_ID) REFERENCES AUTHOR(AUTHOR_ID)
);

CREATE TABLE CUSTOMER (
  CUSTOMER_ID NUMBER(10) PRIMARY KEY,
  NAME VARCHAR2(200) NOT NULL,
  ADDRESS VARCHAR2(200),
  EMAIL VARCHAR2(200),
  PHONE_NUMBER VARCHAR2(20)
);

CREATE TABLE WORK_POSITIONS (
  POSITION_ID NUMBER(10) PRIMARY KEY,
  NAME VARCHAR2(200) NOT NULL
);

CREATE TABLE EMPLOYEE (
  EMPLOYEE_ID NUMBER(10) PRIMARY KEY,
  NAME VARCHAR2(200) NOT NULL,
  POSITION_ID NUMBER(10),
  PHONE_NUMBER VARCHAR2(20),
  CONSTRAINT EMPLOYEE_POSITION_FK FOREIGN KEY (POSITION_ID) REFERENCES WORK_POSITIONS(POSITION_ID)
);
CREATE TABLE ORDERS (
  ORDER_ID NUMBER(10) PRIMARY KEY,
  CUSTOMER_ID NUMBER(10),
  EMPLOYEE_ID NUMBER(10),
  ORDER_DATE DATE,
  PRICE NUMBER(10,2),
  CONSTRAINT ORDERS_CUSTOMER_FK FOREIGN KEY (CUSTOMER_ID) REFERENCES CUSTOMER(CUSTOMER_ID),
  CONSTRAINT ORDERS_EMPLOYEE_FK FOREIGN KEY (EMPLOYEE_ID) REFERENCES EMPLOYEE(EMPLOYEE_ID)
);

CREATE TABLE ORDERED_BOOKS (
  ORDER_ID NUMBER(10) NOT NULL,
  BOOK_ID NUMBER(10) NOT NULL,
  QUANTITY NUMBER(10) DEFAULT 1,
  PRICE NUMBER(10,2),
  CONSTRAINT ORDERED_BOOKS_PK PRIMARY KEY (ORDER_ID, BOOK_ID),
  CONSTRAINT ORDERED_BOOKS_ORDERS_FK FOREIGN KEY (ORDER_ID) REFERENCES ORDERS(ORDER_ID),
  CONSTRAINT ORDERED_BOOKS_BOOK_FK FOREIGN KEY (BOOK_ID) REFERENCES BOOK(BOOK_ID)
);